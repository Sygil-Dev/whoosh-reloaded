<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick start &mdash; Whoosh-Reloaded 2.7.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction to Whoosh" href="intro.html" />
    <link rel="prev" title="Whoosh 0.3 release notes" href="releases/0_3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Whoosh-Reloaded
          </a>
              <div class="version">
                2.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="releases/index.html">Release notes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-quick-introduction">A quick introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-index-and-schema-objects">The <code class="docutils literal notranslate"><span class="pre">Index</span></code> and <code class="docutils literal notranslate"><span class="pre">Schema</span></code> objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-indexwriter-object">The <code class="docutils literal notranslate"><span class="pre">IndexWriter</span></code> object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-searcher-object">The <code class="docutils literal notranslate"><span class="pre">Searcher</span></code> object</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to Whoosh</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="schema.html">Designing a schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">How to index documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="searching.html">How to search</a></li>
<li class="toctree-l1"><a class="reference internal" href="parsing.html">Parsing user queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="querylang.html">The default query language</a></li>
<li class="toctree-l1"><a class="reference internal" href="dates.html">Indexing and parsing dates/times</a></li>
<li class="toctree-l1"><a class="reference internal" href="query.html">Query objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">About analyzers</a></li>
<li class="toctree-l1"><a class="reference internal" href="stemming.html">Stemming, variations, and accent folding</a></li>
<li class="toctree-l1"><a class="reference internal" href="ngrams.html">Indexing and searching N-grams</a></li>
<li class="toctree-l1"><a class="reference internal" href="facets.html">Sorting and faceting</a></li>
<li class="toctree-l1"><a class="reference internal" href="highlight.html">How to create highlighted search result excerpts</a></li>
<li class="toctree-l1"><a class="reference internal" href="keywords.html">Query expansion and Key word extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="spelling.html">“Did you mean… ?” Correcting errors in user queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="fieldcaches.html">Field caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Tips for speeding up batch indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="threads.html">Concurrency, locking, and versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="nested.html">Indexing and searching document hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Whoosh recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/api.html">Whoosh API</a></li>
<li class="toctree-l1"><a class="reference internal" href="tech/index.html">Technical notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Whoosh-Reloaded</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quick start</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-start">
<h1>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this heading">¶</a></h1>
<p>Whoosh is a library of classes and functions for indexing text and then searching the index.
It allows you to develop custom search engines for your content. For example, if you were
creating blogging software, you could use Whoosh to add a search function to allow users to
search blog entries.</p>
<section id="a-quick-introduction">
<h2>A quick introduction<a class="headerlink" href="#a-quick-introduction" title="Permalink to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">whoosh.index</span> <span class="kn">import</span> <span class="n">create_in</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">whoosh.fields</span> <span class="kn">import</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">,</span> <span class="n">ID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">TEXT</span><span class="p">(</span><span class="n">stored</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">path</span><span class="o">=</span><span class="n">ID</span><span class="p">(</span><span class="n">stored</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">content</span><span class="o">=</span><span class="n">TEXT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ix</span> <span class="o">=</span> <span class="n">create_in</span><span class="p">(</span><span class="s2">&quot;indexdir&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span> <span class="o">=</span> <span class="n">ix</span><span class="o">.</span><span class="n">writer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;First document&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/a&quot;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">content</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;This is the first document we&#39;ve added!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Second document&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/b&quot;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">content</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;The second one is even more interesting!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">whoosh.qparser</span> <span class="kn">import</span> <span class="n">QueryParser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">ix</span><span class="o">.</span><span class="n">searcher</span><span class="p">()</span> <span class="k">as</span> <span class="n">searcher</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">query</span> <span class="o">=</span> <span class="n">QueryParser</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">ix</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">results</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">...</span>
<span class="go">{&quot;title&quot;: u&quot;First document&quot;, &quot;path&quot;: u&quot;/a&quot;}</span>
</pre></div>
</div>
</section>
<section id="the-index-and-schema-objects">
<h2>The <code class="docutils literal notranslate"><span class="pre">Index</span></code> and <code class="docutils literal notranslate"><span class="pre">Schema</span></code> objects<a class="headerlink" href="#the-index-and-schema-objects" title="Permalink to this heading">¶</a></h2>
<p>To begin using Whoosh, you need an <em>index object</em>. The first time you create
an index, you must define the index’s <em>schema</em>. The schema lists the <em>fields</em>
in the index. A field is a piece of information for each document in the index,
such as its title or text content. A field can be <em>indexed</em> (meaning it can
be searched) and/or <em>stored</em> (meaning the value that gets indexed is returned
with the results; this is useful for fields such as the title).</p>
<p>This schema has two fields, “title” and “content”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">whoosh.fields</span> <span class="kn">import</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">TEXT</span>

<span class="n">schema</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="n">TEXT</span><span class="p">)</span>
</pre></div>
</div>
<p>You only need to do create the schema once, when you create the index. The
schema is pickled and stored with the index.</p>
<p>When you create the <code class="docutils literal notranslate"><span class="pre">Schema</span></code> object, you use keyword arguments to map field names
to field types. The list of fields and their types defines what you are indexing
and what’s searchable. Whoosh comes with some very useful predefined field
types, and you can easily create your own.</p>
<dl class="simple">
<dt>:class:` whoosh.fields.ID`</dt><dd><p>This type simply indexes (and optionally stores) the entire value of the
field as a single unit (that is, it doesn’t break it up into individual
words). This is useful for fields such as a file path, URL, date, category,
etc.</p>
</dd>
<dt>:class:` whoosh.fields.STORED`</dt><dd><p>This field is stored with the document, but not indexed. This field type is
not indexed and not searchable. This is useful for document information you
want to display to the user in the search results.</p>
</dd>
<dt>:class:` whoosh.fields.KEYWORD`</dt><dd><p>This type is designed for space- or comma-separated keywords. This type is
indexed and searchable (and optionally stored). To save space, it does not
support phrase searching.</p>
</dd>
<dt>:class:` whoosh.fields.TEXT`</dt><dd><p>This type is for body text. It indexes (and optionally stores) the text and
stores term positions to allow phrase searching.</p>
</dd>
<dt>:class:` whoosh.fields.NUMERIC`</dt><dd><p>This type is for numbers. You can store integers or floating point numbers.</p>
</dd>
<dt>:class:` whoosh.fields.BOOLEAN`</dt><dd><p>This type is for boolean (true/false) values.</p>
</dd>
<dt>:class:` whoosh.fields.DATETIME`</dt><dd><p>This type is for <code class="docutils literal notranslate"><span class="pre">datetime</span></code> objects. See <a class="reference internal" href="dates.html"><span class="doc">Indexing and parsing dates/times</span></a> for more
information.</p>
</dd>
<dt>:class:` whoosh.fields.NGRAM` and :class:` whoosh.fields.NGRAMWORDS`</dt><dd><p>These types break the field text or individual terms into N-grams.
See <a class="reference internal" href="ngrams.html"><span class="doc">Indexing and searching N-grams</span></a> for more information.</p>
</dd>
</dl>
<p>(As a shortcut, if you don’t need to pass any arguments to the field type, you
can just give the class name and Whoosh will instantiate the object for you.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">whoosh.fields</span> <span class="kn">import</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">STORED</span><span class="p">,</span> <span class="n">ID</span><span class="p">,</span> <span class="n">KEYWORD</span><span class="p">,</span> <span class="n">TEXT</span>

<span class="n">schema</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">TEXT</span><span class="p">(</span><span class="n">stored</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">content</span><span class="o">=</span><span class="n">TEXT</span><span class="p">,</span>
                <span class="n">path</span><span class="o">=</span><span class="n">ID</span><span class="p">(</span><span class="n">stored</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">tags</span><span class="o">=</span><span class="n">KEYWORD</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">STORED</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="schema.html"><span class="doc">Designing a schema</span></a> for more information.</p>
<p>Once you have the schema, you can create an index using the <code class="docutils literal notranslate"><span class="pre">create_in</span></code>
function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">from</span> <span class="nn">whoosh.index</span> <span class="kn">import</span> <span class="n">create_in</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="n">ix</span> <span class="o">=</span> <span class="n">create_in</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
<p>(At a low level, this creates a <em>Storage</em> object to contain the index. A
<code class="docutils literal notranslate"><span class="pre">Storage</span></code> object represents that medium in which the index will be stored.
Usually this will be <code class="docutils literal notranslate"><span class="pre">FileStorage</span></code>, which stores the index as a set of files
in a directory.)</p>
<p>After you’ve created an index, you can open it using the <code class="docutils literal notranslate"><span class="pre">open_dir</span></code>
convenience function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">whoosh.index</span> <span class="kn">import</span> <span class="n">open_dir</span>

<span class="n">ix</span> <span class="o">=</span> <span class="n">open_dir</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-indexwriter-object">
<h2>The <code class="docutils literal notranslate"><span class="pre">IndexWriter</span></code> object<a class="headerlink" href="#the-indexwriter-object" title="Permalink to this heading">¶</a></h2>
<p>OK, so we’ve got an <code class="docutils literal notranslate"><span class="pre">Index</span></code> object, now we can start adding documents. The
<code class="docutils literal notranslate"><span class="pre">writer()</span></code> method of the <code class="docutils literal notranslate"><span class="pre">Index</span></code> object returns an <code class="docutils literal notranslate"><span class="pre">IndexWriter</span></code> object that lets
you add documents to the index. The IndexWriter’s <code class="docutils literal notranslate"><span class="pre">add_document(**kwargs)</span></code>
method accepts keyword arguments where the field name is mapped to a value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">writer</span> <span class="o">=</span> <span class="n">ix</span><span class="o">.</span><span class="n">writer</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;My document&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;This is my document!&quot;</span><span class="p">,</span>
                    <span class="n">path</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/a&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;first short&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/icons/star.png&quot;</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Second try&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;This is the second example.&quot;</span><span class="p">,</span>
                    <span class="n">path</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/b&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;second short&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/icons/sheep.png&quot;</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Third time&#39;s the charm&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Examples are many.&quot;</span><span class="p">,</span>
                    <span class="n">path</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/c&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;short&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;/icons/book.png&quot;</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p>Two important notes:</p>
<ul class="simple">
<li><p>You don’t have to fill in a value for every field. Whoosh doesn’t care if you
leave out a field from a document.</p></li>
<li><p>Indexed text fields must be passed a unicode value. Fields that are stored
but not indexed (<code class="docutils literal notranslate"><span class="pre">STORED</span></code> field type) can be passed any pickle-able object.</p></li>
</ul>
<p>If you have a text field that is both indexed and stored, you can index a
unicode value but store a different object if necessary (it’s usually not, but
sometimes this is really useful) using this trick:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">writer</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Title to be indexed&quot;</span><span class="p">,</span> <span class="n">_stored_title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Stored title&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Calling commit() on the <code class="docutils literal notranslate"><span class="pre">IndexWriter</span></code> saves the added documents to the index:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">writer</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="indexing.html"><span class="doc">How to index documents</span></a> for more information.</p>
<p>Once your documents are committed to the index, you can search for them.</p>
</section>
<section id="the-searcher-object">
<h2>The <code class="docutils literal notranslate"><span class="pre">Searcher</span></code> object<a class="headerlink" href="#the-searcher-object" title="Permalink to this heading">¶</a></h2>
<p>To begin searching the index, we’ll need a <code class="docutils literal notranslate"><span class="pre">Searcher</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">searcher</span> <span class="o">=</span> <span class="n">ix</span><span class="o">.</span><span class="n">searcher</span><span class="p">()</span>
</pre></div>
</div>
<p>You’ll usually want to open the searcher using a <code class="docutils literal notranslate"><span class="pre">with</span></code> statement so the
searcher is automatically closed when you’re done with it (searcher objects
represent a number of open files, so if you don’t explicitly close them and the
system is slow to collect them, you can run out of file handles):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ix</span><span class="o">.</span><span class="n">searcher</span><span class="p">()</span> <span class="k">as</span> <span class="n">searcher</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This is of course equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">searcher</span> <span class="o">=</span> <span class="n">ix</span><span class="o">.</span><span class="n">searcher</span><span class="p">()</span>
    <span class="o">...</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">searcher</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The Searcher’s <code class="docutils literal notranslate"><span class="pre">search()</span></code> method takes a <em>Query object</em>. You can construct
query objects directly or use a query parser to parse a query string.</p>
<p>For example, this query would match documents that contain both “apple” and
“bear” in the “content” field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Construct query objects directly</span>

<span class="kn">from</span> <span class="nn">whoosh.query</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Term</span>
<span class="n">myquery</span> <span class="o">=</span> <span class="n">And</span><span class="p">([</span><span class="n">Term</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;apple&quot;</span><span class="p">),</span> <span class="n">Term</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;bear&quot;</span><span class="p">)])</span>
</pre></div>
</div>
<p>To parse a query string, you can use the default query parser in the <code class="docutils literal notranslate"><span class="pre">qparser</span></code>
module. The first argument to the <code class="docutils literal notranslate"><span class="pre">QueryParser</span></code> constructor is the default
field to search. This is usually the “body text” field. The second optional
argument is a schema to use to understand how to parse the fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parse a query string</span>

<span class="kn">from</span> <span class="nn">whoosh.qparser</span> <span class="kn">import</span> <span class="n">QueryParser</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">QueryParser</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="n">ix</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span>
<span class="n">myquery</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">querystring</span><span class="p">)</span>
</pre></div>
</div>
<p>Once you have a <code class="docutils literal notranslate"><span class="pre">Searcher</span></code> and a query object, you can use the <code class="docutils literal notranslate"><span class="pre">Searcher</span></code>’s
<code class="docutils literal notranslate"><span class="pre">search()</span></code> method to run the query and get a <code class="docutils literal notranslate"><span class="pre">Results</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">myquery</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">{&quot;title&quot;: &quot;Second try&quot;, &quot;path&quot;: &quot;/b&quot;, &quot;icon&quot;: &quot;/icons/sheep.png&quot;}</span>
</pre></div>
</div>
<p>The default <code class="docutils literal notranslate"><span class="pre">QueryParser</span></code> implements a query language very similar to
Lucene’s. It lets you connect terms with <code class="docutils literal notranslate"><span class="pre">AND</span></code> or <code class="docutils literal notranslate"><span class="pre">OR</span></code>, eleminate terms with
<code class="docutils literal notranslate"><span class="pre">NOT</span></code>, group terms together into clauses with parentheses, do range, prefix,
and wilcard queries, and specify different fields to search. By default it joins
clauses together with <code class="docutils literal notranslate"><span class="pre">AND</span></code> (so by default, all terms you specify must be in
the document for the document to match):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;render shade animate&quot;</span><span class="p">))</span>
<span class="go">And([Term(&quot;content&quot;, &quot;render&quot;), Term(&quot;content&quot;, &quot;shade&quot;), Term(&quot;content&quot;, &quot;animate&quot;)])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;render OR (title:shade keyword:animate)&quot;</span><span class="p">))</span>
<span class="go">Or([Term(&quot;content&quot;, &quot;render&quot;), And([Term(&quot;title&quot;, &quot;shade&quot;), Term(&quot;keyword&quot;, &quot;animate&quot;)])])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rend*&quot;</span><span class="p">))</span>
<span class="go">Prefix(&quot;content&quot;, &quot;rend&quot;)</span>
</pre></div>
</div>
<p>Whoosh includes extra features for dealing with search results, such as</p>
<ul class="simple">
<li><p>Sorting results by the value of an indexed field, instead of by relelvance.</p></li>
<li><p>Highlighting the search terms in excerpts from the original documents.</p></li>
<li><p>Expanding the query terms based on the top few documents found.</p></li>
<li><p>Paginating the results (e.g. “Showing results 1-20, page 1 of 4”).</p></li>
</ul>
<p>See <a class="reference internal" href="searching.html"><span class="doc">How to search</span></a> for more information.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="releases/0_3.html" class="btn btn-neutral float-left" title="Whoosh 0.3 release notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="intro.html" class="btn btn-neutral float-right" title="Introduction to Whoosh" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2007-2012 Matt Chaput.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>