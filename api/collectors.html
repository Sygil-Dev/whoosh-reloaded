<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>collectors module &mdash; Whoosh 2.7.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="columns module" href="columns.html" />
    <link rel="prev" title="codec.base module" href="codec/base.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Whoosh
          </a>
              <div class="version">
                2.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction to Whoosh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schema.html">Designing a schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indexing.html">How to index documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../searching.html">How to search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parsing.html">Parsing user queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../querylang.html">The default query language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dates.html">Indexing and parsing dates/times</a></li>
<li class="toctree-l1"><a class="reference internal" href="../query.html">Query objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis.html">About analyzers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stemming.html">Stemming, variations, and accent folding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ngrams.html">Indexing and searching N-grams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../facets.html">Sorting and faceting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../highlight.html">How to create highlighted search result excerpts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../keywords.html">Query expansion and Key word extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spelling.html">“Did you mean… ?” Correcting errors in user queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fieldcaches.html">Field caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch.html">Tips for speeding up batch indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../threads.html">Concurrency, locking, and versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nested.html">Indexing and searching document hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes.html">Whoosh recipes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">Whoosh API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="analysis.html"><code class="docutils literal notranslate"><span class="pre">analysis</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="codec/base.html"><code class="docutils literal notranslate"><span class="pre">codec.base</span></code> module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">collectors</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#base-classes">Base classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.Collector"><code class="docutils literal notranslate"><span class="pre">Collector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.ScoredCollector"><code class="docutils literal notranslate"><span class="pre">ScoredCollector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.WrappingCollector"><code class="docutils literal notranslate"><span class="pre">WrappingCollector</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#basic-collectors">Basic collectors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.TopCollector"><code class="docutils literal notranslate"><span class="pre">TopCollector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.UnlimitedCollector"><code class="docutils literal notranslate"><span class="pre">UnlimitedCollector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.SortingCollector"><code class="docutils literal notranslate"><span class="pre">SortingCollector</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wrappers">Wrappers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.FilterCollector"><code class="docutils literal notranslate"><span class="pre">FilterCollector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.FacetCollector"><code class="docutils literal notranslate"><span class="pre">FacetCollector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.CollapseCollector"><code class="docutils literal notranslate"><span class="pre">CollapseCollector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.TimeLimitCollector"><code class="docutils literal notranslate"><span class="pre">TimeLimitCollector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#whoosh.collectors.TermsCollector"><code class="docutils literal notranslate"><span class="pre">TermsCollector</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="columns.html"><code class="docutils literal notranslate"><span class="pre">columns</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html"><code class="docutils literal notranslate"><span class="pre">fields</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="filedb/filestore.html"><code class="docutils literal notranslate"><span class="pre">filedb.filestore</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="filedb/filetables.html"><code class="docutils literal notranslate"><span class="pre">filedb.filetables</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="filedb/structfile.html"><code class="docutils literal notranslate"><span class="pre">filedb.structfile</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="formats.html"><code class="docutils literal notranslate"><span class="pre">formats</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="highlight.html"><code class="docutils literal notranslate"><span class="pre">highlight</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsets.html"><code class="docutils literal notranslate"><span class="pre">support.bitvector</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html"><code class="docutils literal notranslate"><span class="pre">index</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="lang/morph_en.html"><code class="docutils literal notranslate"><span class="pre">lang.morph_en</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="lang/porter.html"><code class="docutils literal notranslate"><span class="pre">lang.porter</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="lang/wordnet.html"><code class="docutils literal notranslate"><span class="pre">lang.wordnet</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="matching.html"><code class="docutils literal notranslate"><span class="pre">matching</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="qparser.html"><code class="docutils literal notranslate"><span class="pre">qparser</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html"><code class="docutils literal notranslate"><span class="pre">query</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="reading.html"><code class="docutils literal notranslate"><span class="pre">reading</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="scoring.html"><code class="docutils literal notranslate"><span class="pre">scoring</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="searching.html"><code class="docutils literal notranslate"><span class="pre">searching</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="sorting.html"><code class="docutils literal notranslate"><span class="pre">sorting</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spelling.html"><code class="docutils literal notranslate"><span class="pre">spelling</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="support/charset.html"><code class="docutils literal notranslate"><span class="pre">support.charset</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="support/levenshtein.html"><code class="docutils literal notranslate"><span class="pre">support.levenshtein</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="util.html"><code class="docutils literal notranslate"><span class="pre">util</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing.html"><code class="docutils literal notranslate"><span class="pre">writing</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tech/index.html">Technical notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Whoosh</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="api.html">Whoosh API</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">collectors</span></code> module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/collectors.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-whoosh.collectors">
<span id="collectors-module"></span><h1><code class="docutils literal notranslate"><span class="pre">collectors</span></code> module<a class="headerlink" href="#module-whoosh.collectors" title="Permalink to this heading">¶</a></h1>
<p>This module contains “collector” objects. Collectors provide a way to gather
“raw” results from a <a class="reference internal" href="matching.html#whoosh.matching.Matcher" title="whoosh.matching.Matcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.matching.Matcher</span></code></a> object, implement
sorting, filtering, collation, etc., and produce a
<a class="reference internal" href="searching.html#whoosh.searching.Results" title="whoosh.searching.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.searching.Results</span></code></a> object.</p>
<p>The basic collectors are:</p>
<dl class="simple">
<dt>TopCollector</dt><dd><p>Returns the top N matching results sorted by score, using block-quality
optimizations to skip blocks of documents that can’t contribute to the top
N. The <a class="reference internal" href="searching.html#whoosh.searching.Searcher.search" title="whoosh.searching.Searcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">whoosh.searching.Searcher.search()</span></code></a> method uses this type of
collector by default or when you specify a <code class="docutils literal notranslate"><span class="pre">limit</span></code>.</p>
</dd>
<dt>UnlimitedCollector</dt><dd><p>Returns all matching results sorted by score. The
<a class="reference internal" href="searching.html#whoosh.searching.Searcher.search" title="whoosh.searching.Searcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">whoosh.searching.Searcher.search()</span></code></a> method uses this type of collector
when you specify <code class="docutils literal notranslate"><span class="pre">limit=None</span></code> or you specify a limit equal to or greater
than the number of documents in the searcher.</p>
</dd>
<dt>SortingCollector</dt><dd><p>Returns all matching results sorted by a <code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.sorting.Facet</span></code>
object. The <a class="reference internal" href="searching.html#whoosh.searching.Searcher.search" title="whoosh.searching.Searcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">whoosh.searching.Searcher.search()</span></code></a> method uses this type
of collector when you use the <code class="docutils literal notranslate"><span class="pre">sortedby</span></code> parameter.</p>
</dd>
</dl>
<p>Here’s an example of a simple collector that instead of remembering the matched
documents just counts up the number of matches:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CountingCollector</span><span class="p">(</span><span class="n">Collector</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">top_searcher</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="c1"># Always call super method in prepare</span>
        <span class="n">Collector</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">top_searcher</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_docnum</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">CountingCollector</span><span class="p">()</span>
<span class="n">mysearcher</span><span class="o">.</span><span class="n">search_with_collector</span><span class="p">(</span><span class="n">myquery</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>
</pre></div>
</div>
<p>There are also several wrapping collectors that extend or modify the
functionality of other collectors. The meth:<cite>whoosh.searching.Searcher.search</cite>
method uses many of these when you specify various parameters.</p>
<p>NOTE: collectors are not designed to be reentrant or thread-safe. It is
generally a good idea to create a new collector for each search.</p>
<section id="base-classes">
<h2>Base classes<a class="headerlink" href="#base-classes" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.Collector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">Collector</span></span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for collectors.</p>
<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.all_ids">
<span class="sig-name descname"><span class="pre">all_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.all_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.all_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sequence of docnums matched in this collector. (Only valid
after the collector is run.)</p>
<p>The default implementation is based on the docset. If a collector does
not maintain the docset, it will need to override this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.collect">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called for every matched document. It should do the
work of adding a matched document to the results, and it should return
an object to use as a “sorting key” for the given document (such as the
document’s score, a key generated by a facet, or just None). Subclasses
must implement this method.</p>
<p>If you want the score for the current document, use
<code class="docutils literal notranslate"><span class="pre">self.matcher.score()</span></code>.</p>
<p>Overriding methods should add the current document offset
(<code class="docutils literal notranslate"><span class="pre">self.offset</span></code>) to the <code class="docutils literal notranslate"><span class="pre">sub_docnum</span></code> to get the top-level document
number for the matching document to add to results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sub_docnum</strong> – the document number of the current match within the
current sub-searcher. You must add <code class="docutils literal notranslate"><span class="pre">self.offset</span></code> to this number
to get the document’s top-level document number.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.collect_matches">
<span class="sig-name descname"><span class="pre">collect_matches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.collect_matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.collect_matches" title="Permalink to this definition">¶</a></dt>
<dd><p>This method calls <a class="reference internal" href="#whoosh.collectors.Collector.matches" title="whoosh.collectors.Collector.matches"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.matches()</span></code></a> and then for each
matched document calls <a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a>. Sub-classes that
want to intervene between finding matches and adding them to the
collection (for example, to filter out certain documents) can override
this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.computes_count">
<span class="sig-name descname"><span class="pre">computes_count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.computes_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.computes_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the collector naturally computes the exact number of
matching documents. Collectors that use block optimizations will return
False since they might skip blocks containing matching documents.</p>
<p>Note that if this method returns False you can still call <a class="reference internal" href="#whoosh.collectors.Collector.count" title="whoosh.collectors.Collector.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count()</span></code></a>,
but it means that method might have to do more work to calculate the
number of matching documents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.count">
<span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of documents matched in this collector.
(Only valid after the collector is run.)</p>
<p>The default implementation is based on the docset. If a collector does
not maintain the docset, it will need to override this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.finish">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.finish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called after a search.</p>
<p>Subclasses can override this to perform set-up work, but
they should still call the superclass’s method because it sets several
necessary attributes on the collector object:</p>
<dl class="simple">
<dt>self.runtime</dt><dd><p>The time (in seconds) the search took.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.matches">
<span class="sig-name descname"><span class="pre">matches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a series of relative document numbers for matches
in the current subsearcher.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_searcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called before a search.</p>
<p>Subclasses can override this to perform set-up work, but
they should still call the superclass’s method because it sets several
necessary attributes on the collector object:</p>
<dl class="simple">
<dt>self.top_searcher</dt><dd><p>The top-level searcher.</p>
</dd>
<dt>self.q</dt><dd><p>The query object</p>
</dd>
<dt>self.context</dt><dd><p><code class="docutils literal notranslate"><span class="pre">context.needs_current</span></code> controls whether a wrapping collector
requires that this collector’s matcher be in a valid state at every
call to <code class="docutils literal notranslate"><span class="pre">collect()</span></code>. If this is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the collector is free
to use faster methods that don’t necessarily keep the matcher
updated, such as <code class="docutils literal notranslate"><span class="pre">matcher.all_ids()</span></code>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_searcher</strong> – the top-level <a class="reference internal" href="searching.html#whoosh.searching.Searcher" title="whoosh.searching.Searcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.searching.Searcher</span></code></a>
object.</p></li>
<li><p><strong>q</strong> – the <a class="reference internal" href="query.html#whoosh.query.Query" title="whoosh.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.query.Query</span></code></a> object being searched for.</p></li>
<li><p><strong>context</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.searching.SearchContext</span></code> object
containing information about the search.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a document from the collector. Not that this method uses the
global document number as opposed to <a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a> which
takes a segment-relative docnum.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.results">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">results</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="searching.html#whoosh.searching.Results" title="whoosh.searching.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> object containing the
results of the search. Subclasses must implement this method</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.set_subsearcher">
<span class="sig-name descname"><span class="pre">set_subsearcher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subsearcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.set_subsearcher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.set_subsearcher" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called each time the collector starts on a new
sub-searcher.</p>
<p>Subclasses can override this to perform set-up work, but
they should still call the superclass’s method because it sets several
necessary attributes on the collector object:</p>
<dl class="simple">
<dt>self.subsearcher</dt><dd><p>The current sub-searcher. If the top-level searcher is atomic, this
is the same as the top-level searcher.</p>
</dd>
<dt>self.offset</dt><dd><p>The document number offset of the current searcher. You must add
this number to the document number passed to
<a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a> to get the top-level document number
for use in results.</p>
</dd>
<dt>self.matcher</dt><dd><p>A <a class="reference internal" href="matching.html#whoosh.matching.Matcher" title="whoosh.matching.Matcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.matching.Matcher</span></code></a> object representing the matches
for the query in the current sub-searcher.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.Collector.sort_key">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sort_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#Collector.sort_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.Collector.sort_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorting key for the current match. This should return the
same value returned by <a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a>, but without the side
effect of adding the current document to the results.</p>
<p>If the collector has been prepared with <code class="docutils literal notranslate"><span class="pre">context.needs_current=True</span></code>,
this method can use <code class="docutils literal notranslate"><span class="pre">self.matcher</span></code> to get information, for example
the score. Otherwise, it should only use the provided <code class="docutils literal notranslate"><span class="pre">sub_docnum</span></code>,
since the matcher may be in an inconsistent state.</p>
<p>Subclasses must implement this method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.ScoredCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">ScoredCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#ScoredCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.ScoredCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for collectors that sort the results based on document score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>replace</strong> – Number of matches between attempts to replace the
matcher with a more efficient version.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.ScoredCollector.collect">
<span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#ScoredCollector.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.ScoredCollector.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called for every matched document. It should do the
work of adding a matched document to the results, and it should return
an object to use as a “sorting key” for the given document (such as the
document’s score, a key generated by a facet, or just None). Subclasses
must implement this method.</p>
<p>If you want the score for the current document, use
<code class="docutils literal notranslate"><span class="pre">self.matcher.score()</span></code>.</p>
<p>Overriding methods should add the current document offset
(<code class="docutils literal notranslate"><span class="pre">self.offset</span></code>) to the <code class="docutils literal notranslate"><span class="pre">sub_docnum</span></code> to get the top-level document
number for the matching document to add to results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sub_docnum</strong> – the document number of the current match within the
current sub-searcher. You must add <code class="docutils literal notranslate"><span class="pre">self.offset</span></code> to this number
to get the document’s top-level document number.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.ScoredCollector.matches">
<span class="sig-name descname"><span class="pre">matches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#ScoredCollector.matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.ScoredCollector.matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a series of relative document numbers for matches
in the current subsearcher.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.ScoredCollector.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_searcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#ScoredCollector.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.ScoredCollector.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called before a search.</p>
<p>Subclasses can override this to perform set-up work, but
they should still call the superclass’s method because it sets several
necessary attributes on the collector object:</p>
<dl class="simple">
<dt>self.top_searcher</dt><dd><p>The top-level searcher.</p>
</dd>
<dt>self.q</dt><dd><p>The query object</p>
</dd>
<dt>self.context</dt><dd><p><code class="docutils literal notranslate"><span class="pre">context.needs_current</span></code> controls whether a wrapping collector
requires that this collector’s matcher be in a valid state at every
call to <code class="docutils literal notranslate"><span class="pre">collect()</span></code>. If this is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the collector is free
to use faster methods that don’t necessarily keep the matcher
updated, such as <code class="docutils literal notranslate"><span class="pre">matcher.all_ids()</span></code>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_searcher</strong> – the top-level <a class="reference internal" href="searching.html#whoosh.searching.Searcher" title="whoosh.searching.Searcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.searching.Searcher</span></code></a>
object.</p></li>
<li><p><strong>q</strong> – the <a class="reference internal" href="query.html#whoosh.query.Query" title="whoosh.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.query.Query</span></code></a> object being searched for.</p></li>
<li><p><strong>context</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.searching.SearchContext</span></code> object
containing information about the search.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.ScoredCollector.sort_key">
<span class="sig-name descname"><span class="pre">sort_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#ScoredCollector.sort_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.ScoredCollector.sort_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorting key for the current match. This should return the
same value returned by <a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a>, but without the side
effect of adding the current document to the results.</p>
<p>If the collector has been prepared with <code class="docutils literal notranslate"><span class="pre">context.needs_current=True</span></code>,
this method can use <code class="docutils literal notranslate"><span class="pre">self.matcher</span></code> to get information, for example
the score. Otherwise, it should only use the provided <code class="docutils literal notranslate"><span class="pre">sub_docnum</span></code>,
since the matcher may be in an inconsistent state.</p>
<p>Subclasses must implement this method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">WrappingCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for collectors that wrap other collectors.</p>
<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.all_ids">
<span class="sig-name descname"><span class="pre">all_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.all_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.all_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sequence of docnums matched in this collector. (Only valid
after the collector is run.)</p>
<p>The default implementation is based on the docset. If a collector does
not maintain the docset, it will need to override this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.collect">
<span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called for every matched document. It should do the
work of adding a matched document to the results, and it should return
an object to use as a “sorting key” for the given document (such as the
document’s score, a key generated by a facet, or just None). Subclasses
must implement this method.</p>
<p>If you want the score for the current document, use
<code class="docutils literal notranslate"><span class="pre">self.matcher.score()</span></code>.</p>
<p>Overriding methods should add the current document offset
(<code class="docutils literal notranslate"><span class="pre">self.offset</span></code>) to the <code class="docutils literal notranslate"><span class="pre">sub_docnum</span></code> to get the top-level document
number for the matching document to add to results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sub_docnum</strong> – the document number of the current match within the
current sub-searcher. You must add <code class="docutils literal notranslate"><span class="pre">self.offset</span></code> to this number
to get the document’s top-level document number.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.collect_matches">
<span class="sig-name descname"><span class="pre">collect_matches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.collect_matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.collect_matches" title="Permalink to this definition">¶</a></dt>
<dd><p>This method calls <a class="reference internal" href="#whoosh.collectors.Collector.matches" title="whoosh.collectors.Collector.matches"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.matches()</span></code></a> and then for each
matched document calls <a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a>. Sub-classes that
want to intervene between finding matches and adding them to the
collection (for example, to filter out certain documents) can override
this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.count">
<span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of documents matched in this collector.
(Only valid after the collector is run.)</p>
<p>The default implementation is based on the docset. If a collector does
not maintain the docset, it will need to override this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.finish">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.finish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called after a search.</p>
<p>Subclasses can override this to perform set-up work, but
they should still call the superclass’s method because it sets several
necessary attributes on the collector object:</p>
<dl class="simple">
<dt>self.runtime</dt><dd><p>The time (in seconds) the search took.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.matches">
<span class="sig-name descname"><span class="pre">matches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a series of relative document numbers for matches
in the current subsearcher.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_searcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called before a search.</p>
<p>Subclasses can override this to perform set-up work, but
they should still call the superclass’s method because it sets several
necessary attributes on the collector object:</p>
<dl class="simple">
<dt>self.top_searcher</dt><dd><p>The top-level searcher.</p>
</dd>
<dt>self.q</dt><dd><p>The query object</p>
</dd>
<dt>self.context</dt><dd><p><code class="docutils literal notranslate"><span class="pre">context.needs_current</span></code> controls whether a wrapping collector
requires that this collector’s matcher be in a valid state at every
call to <code class="docutils literal notranslate"><span class="pre">collect()</span></code>. If this is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the collector is free
to use faster methods that don’t necessarily keep the matcher
updated, such as <code class="docutils literal notranslate"><span class="pre">matcher.all_ids()</span></code>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_searcher</strong> – the top-level <a class="reference internal" href="searching.html#whoosh.searching.Searcher" title="whoosh.searching.Searcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.searching.Searcher</span></code></a>
object.</p></li>
<li><p><strong>q</strong> – the <a class="reference internal" href="query.html#whoosh.query.Query" title="whoosh.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.query.Query</span></code></a> object being searched for.</p></li>
<li><p><strong>context</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.searching.SearchContext</span></code> object
containing information about the search.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a document from the collector. Not that this method uses the
global document number as opposed to <a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a> which
takes a segment-relative docnum.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.results">
<span class="sig-name descname"><span class="pre">results</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="searching.html#whoosh.searching.Results" title="whoosh.searching.Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> object containing the
results of the search. Subclasses must implement this method</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.set_subsearcher">
<span class="sig-name descname"><span class="pre">set_subsearcher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subsearcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.set_subsearcher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.set_subsearcher" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called each time the collector starts on a new
sub-searcher.</p>
<p>Subclasses can override this to perform set-up work, but
they should still call the superclass’s method because it sets several
necessary attributes on the collector object:</p>
<dl class="simple">
<dt>self.subsearcher</dt><dd><p>The current sub-searcher. If the top-level searcher is atomic, this
is the same as the top-level searcher.</p>
</dd>
<dt>self.offset</dt><dd><p>The document number offset of the current searcher. You must add
this number to the document number passed to
<a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a> to get the top-level document number
for use in results.</p>
</dd>
<dt>self.matcher</dt><dd><p>A <a class="reference internal" href="matching.html#whoosh.matching.Matcher" title="whoosh.matching.Matcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.matching.Matcher</span></code></a> object representing the matches
for the query in the current sub-searcher.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="whoosh.collectors.WrappingCollector.sort_key">
<span class="sig-name descname"><span class="pre">sort_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub_docnum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#WrappingCollector.sort_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.WrappingCollector.sort_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorting key for the current match. This should return the
same value returned by <a class="reference internal" href="#whoosh.collectors.Collector.collect" title="whoosh.collectors.Collector.collect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Collector.collect()</span></code></a>, but without the side
effect of adding the current document to the results.</p>
<p>If the collector has been prepared with <code class="docutils literal notranslate"><span class="pre">context.needs_current=True</span></code>,
this method can use <code class="docutils literal notranslate"><span class="pre">self.matcher</span></code> to get information, for example
the score. Otherwise, it should only use the provided <code class="docutils literal notranslate"><span class="pre">sub_docnum</span></code>,
since the matcher may be in an inconsistent state.</p>
<p>Subclasses must implement this method.</p>
</dd></dl>

</dd></dl>

</section>
<section id="basic-collectors">
<h2>Basic collectors<a class="headerlink" href="#basic-collectors" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.TopCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">TopCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usequality</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#TopCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.TopCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that only returns the top “N” scored results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limit</strong> – the maximum number of results to return.</p></li>
<li><p><strong>usequality</strong> – whether to use block-quality optimizations. This may
be useful for debugging.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.UnlimitedCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">UnlimitedCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#UnlimitedCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.UnlimitedCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that returns <strong>all</strong> scored results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>replace</strong> – Number of matches between attempts to replace the
matcher with a more efficient version.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.SortingCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">SortingCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sortedby</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#SortingCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.SortingCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that returns results sorted by a given
<code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.sorting.Facet</span></code> object. See <a class="reference internal" href="../facets.html"><span class="doc">Sorting and faceting</span></a> for more
information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sortedby</strong> – see <a class="reference internal" href="../facets.html"><span class="doc">Sorting and faceting</span></a>.</p></li>
<li><p><strong>reverse</strong> – If True, reverse the overall results. Note that you
can reverse individual facets in a multi-facet sort key as well.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="wrappers">
<h2>Wrappers<a class="headerlink" href="#wrappers" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.FilterCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">FilterCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restrict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#FilterCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.FilterCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that lets you allow and/or restrict certain document numbers
in the results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uc</span> <span class="o">=</span> <span class="n">collectors</span><span class="o">.</span><span class="n">UnlimitedCollector</span><span class="p">()</span>

<span class="n">ins</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">Term</span><span class="p">(</span><span class="s2">&quot;chapter&quot;</span><span class="p">,</span> <span class="s2">&quot;rendering&quot;</span><span class="p">)</span>
<span class="n">outs</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">Term</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;restricted&quot;</span><span class="p">)</span>
<span class="n">fc</span> <span class="o">=</span> <span class="n">FilterCollector</span><span class="p">(</span><span class="n">uc</span><span class="p">,</span> <span class="n">allow</span><span class="o">=</span><span class="n">ins</span><span class="p">,</span> <span class="n">restrict</span><span class="o">=</span><span class="n">outs</span><span class="p">)</span>

<span class="n">mysearcher</span><span class="o">.</span><span class="n">search_with_collector</span><span class="p">(</span><span class="n">myquery</span><span class="p">,</span> <span class="n">fc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fc</span><span class="o">.</span><span class="n">results</span><span class="p">())</span>
</pre></div>
</div>
<p>This collector discards a document if:</p>
<ul class="simple">
<li><p>The allowed set is not None and a document number is not in the set, or</p></li>
<li><p>The restrict set is not None and a document number is in the set.</p></li>
</ul>
<p>(So, if the same document number is in both sets, that document will be
discarded.)</p>
<p>If you have a reference to the collector, you can use
<code class="docutils literal notranslate"><span class="pre">FilterCollector.filtered_count</span></code> to get the number of matching documents
filtered out of the results by the collector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>child</strong> – the collector to wrap.</p></li>
<li><p><strong>allow</strong> – a query, Results object, or set-like object containing
docnument numbers that are allowed in the results, or None (meaning
everything is allowed).</p></li>
<li><p><strong>restrict</strong> – a query, Results object, or set-like object containing
document numbers to disallow from the results, or None (meaning
nothing is disallowed).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.FacetCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">FacetCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupedby</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maptype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#FacetCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.FacetCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that creates groups of documents based on
<code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.sorting.Facet</span></code> objects. See <a class="reference internal" href="../facets.html"><span class="doc">Sorting and faceting</span></a> for more
information.</p>
<p>This collector is used if you specify a <code class="docutils literal notranslate"><span class="pre">groupedby</span></code> parameter in the
<a class="reference internal" href="searching.html#whoosh.searching.Searcher.search" title="whoosh.searching.Searcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">whoosh.searching.Searcher.search()</span></code></a> method. You can use the
<a class="reference internal" href="searching.html#whoosh.searching.Results.groups" title="whoosh.searching.Results.groups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">whoosh.searching.Results.groups()</span></code></a> method to access the facet groups.</p>
<p>If you have a reference to the collector can also use
<code class="docutils literal notranslate"><span class="pre">FacetedCollector.facetmaps</span></code> to access the groups directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uc</span> <span class="o">=</span> <span class="n">collectors</span><span class="o">.</span><span class="n">UnlimitedCollector</span><span class="p">()</span>
<span class="n">fc</span> <span class="o">=</span> <span class="n">FacetedCollector</span><span class="p">(</span><span class="n">uc</span><span class="p">,</span> <span class="n">sorting</span><span class="o">.</span><span class="n">FieldFacet</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">))</span>
<span class="n">mysearcher</span><span class="o">.</span><span class="n">search_with_collector</span><span class="p">(</span><span class="n">myquery</span><span class="p">,</span> <span class="n">fc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fc</span><span class="o">.</span><span class="n">facetmaps</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>groupedby</strong> – see <a class="reference internal" href="../facets.html"><span class="doc">Sorting and faceting</span></a>.</p></li>
<li><p><strong>maptype</strong> – a <a class="reference internal" href="sorting.html#whoosh.sorting.FacetMap" title="whoosh.sorting.FacetMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.sorting.FacetMap</span></code></a> type to use for any
facets that don’t specify their own.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.CollapseCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">CollapseCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyfacet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#CollapseCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.CollapseCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that collapses results based on a facet. That is, it
eliminates all but the top N results that share the same facet key.
Documents with an empty key for the facet are never eliminated.</p>
<p>The “top” results within each group is determined by the result ordering
(e.g. highest score in a scored search) or an optional second “ordering”
facet.</p>
<p>If you have a reference to the collector you can use
<code class="docutils literal notranslate"><span class="pre">CollapseCollector.collapsed_counts</span></code> to access the number of documents
eliminated based on each key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tc</span> <span class="o">=</span> <span class="n">TopCollector</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">cc</span> <span class="o">=</span> <span class="n">CollapseCollector</span><span class="p">(</span><span class="n">tc</span><span class="p">,</span> <span class="s2">&quot;group&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">mysearcher</span><span class="o">.</span><span class="n">search_with_collector</span><span class="p">(</span><span class="n">myquery</span><span class="p">,</span> <span class="n">cc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">collapsed_counts</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../searching.html#collapsing"><span class="std std-ref">Collapsing results</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>child</strong> – the collector to wrap.</p></li>
<li><p><strong>keyfacet</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.sorting.Facet</span></code> to use for collapsing.
All but the top N documents that share a key will be eliminated
from the results.</p></li>
<li><p><strong>limit</strong> – the maximum number of documents to keep for each key.</p></li>
<li><p><strong>order</strong> – an optional <code class="xref py py-class docutils literal notranslate"><span class="pre">whoosh.sorting.Facet</span></code> to use
to determine the “top” document(s) to keep when collapsing. The
default (<code class="docutils literal notranslate"><span class="pre">orderfaceet=None</span></code>) uses the results order (e.g. the
highest score in a scored search).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.TimeLimitCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">TimeLimitCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timelimit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">greedy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_alarm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#TimeLimitCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.TimeLimitCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that raises a <code class="xref py py-class docutils literal notranslate"><span class="pre">TimeLimit</span></code> exception if the search
does not complete within a certain number of seconds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uc</span> <span class="o">=</span> <span class="n">collectors</span><span class="o">.</span><span class="n">UnlimitedCollector</span><span class="p">()</span>
<span class="n">tlc</span> <span class="o">=</span> <span class="n">TimeLimitedCollector</span><span class="p">(</span><span class="n">uc</span><span class="p">,</span> <span class="n">timelimit</span><span class="o">=</span><span class="mf">5.8</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">mysearcher</span><span class="o">.</span><span class="n">search_with_collector</span><span class="p">(</span><span class="n">myquery</span><span class="p">,</span> <span class="n">tlc</span><span class="p">)</span>
<span class="k">except</span> <span class="n">collectors</span><span class="o">.</span><span class="n">TimeLimit</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The search ran out of time!&quot;</span><span class="p">)</span>

<span class="c1"># We can still get partial results from the collector</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tlc</span><span class="o">.</span><span class="n">results</span><span class="p">())</span>
</pre></div>
</div>
<p>IMPORTANT: On Unix systems (systems where signal.SIGALRM is defined), the
code uses signals to stop searching immediately when the time limit is
reached. On Windows, the OS does not support this functionality, so the
search only checks the time between each found document, so if a matcher
is slow the search could exceed the time limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>child</strong> – the collector to wrap.</p></li>
<li><p><strong>timelimit</strong> – the maximum amount of time (in seconds) to
allow for searching. If the search takes longer than this, it will
raise a <code class="docutils literal notranslate"><span class="pre">TimeLimit</span></code> exception.</p></li>
<li><p><strong>greedy</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code>, the collector will finish adding the most
recent hit before raising the <code class="docutils literal notranslate"><span class="pre">TimeLimit</span></code> exception.</p></li>
<li><p><strong>use_alarm</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> (the default), the collector will try to
use signal.SIGALRM (on UNIX).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="whoosh.collectors.TermsCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">whoosh.collectors.</span></span><span class="sig-name descname"><span class="pre">TermsCollector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settype=&lt;class</span> <span class="pre">'set'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/whoosh/collectors.html#TermsCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#whoosh.collectors.TermsCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>A collector that remembers which terms appeared in which terms appeared
in each matched document.</p>
<p>This collector is used if you specify <code class="docutils literal notranslate"><span class="pre">terms=True</span></code> in the
<a class="reference internal" href="searching.html#whoosh.searching.Searcher.search" title="whoosh.searching.Searcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">whoosh.searching.Searcher.search()</span></code></a> method.</p>
<p>If you have a reference to the collector can also use
<code class="docutils literal notranslate"><span class="pre">TermsCollector.termslist</span></code> to access the term lists directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uc</span> <span class="o">=</span> <span class="n">collectors</span><span class="o">.</span><span class="n">UnlimitedCollector</span><span class="p">()</span>
<span class="n">tc</span> <span class="o">=</span> <span class="n">TermsCollector</span><span class="p">(</span><span class="n">uc</span><span class="p">)</span>
<span class="n">mysearcher</span><span class="o">.</span><span class="n">search_with_collector</span><span class="p">(</span><span class="n">myquery</span><span class="p">,</span> <span class="n">tc</span><span class="p">)</span>
<span class="c1"># tc.termdocs is a dictionary mapping (fieldname, text) tuples to</span>
<span class="c1"># sets of document numbers</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tc</span><span class="o">.</span><span class="n">termdocs</span><span class="p">)</span>
<span class="c1"># tc.docterms is a dictionary mapping docnums to lists of</span>
<span class="c1"># (fieldname, text) tuples</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tc</span><span class="o">.</span><span class="n">docterms</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="codec/base.html" class="btn btn-neutral float-left" title="codec.base module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="columns.html" class="btn btn-neutral float-right" title="columns module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2007-2012 Matt Chaput.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>